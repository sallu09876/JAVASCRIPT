<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Spa Client Intake Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* --- Basic CSS Reset & Utilities --- */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #2d0f4b, #b01e80);
      color: #fff;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .form-container {
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      width: 100%;
      max-width: 600px;
      padding: 30px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 28px;
    }
    .step-indicator {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
    }
    .step {
      flex: 1;
      text-align: center;
      position: relative;
      color: #bbb;
    }
    .step.active, .step.completed {
      color: #fff;
    }
    .step::before {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 50%;
      width: 40px;
      height: 4px;
      background: #bbb;
      transform: translateX(-50%);
    }
    .step.active::before, .step.completed::before {
      background: #ff4081;
    }
    .step:not(:last-child)::after {
      content: "";
      position: absolute;
      bottom: -10px;
      right: -50%;
      width: 100%;
      height: 4px;
      background: #bbb;
      transform: translateX(50%);
    }
    .step.completed:not(:last-child)::after {
      background: #ff4081;
    }
    .form-step {
      display: none;
    }
    .form-step.active {
      display: block;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .form-group input, .form-group select {
      width: 100%;
      padding: 10px 12px;
      border: none;
      border-radius: 4px;
      font-size: 16px;
    }
    .error {
      color: #ff9999;
      margin-top: 5px;
      font-size: 14px;
    }
    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    .button-group button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background: #ff4081;
      color: #fff;
    }
    .button-group button[disabled] {
      background: #777;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h2>Spa Client Intake Form</h2>
    <div class="step-indicator">
      <div class="step active" data-step="1">Client Details</div>
      <div class="step" data-step="2">Emergency Contact Details</div>
      <div class="step" data-step="3">Services &amp; Checkout</div>
    </div>

    <form id="spaForm" novalidate>
      <!-- Step 1: Client Details -->
      <div class="form-step active" data-step="1">
        <div class="form-group">
          <label for="firstName">First Name *</label>
          <input type="text" id="firstName" name="firstName" required>
          <div class="error" id="error-firstName"></div>
        </div>
        <div class="form-group">
          <label for="lastName">Last Name *</label>
          <input type="text" id="lastName" name="lastName" required>
          <div class="error" id="error-lastName"></div>
        </div>
        <div class="form-group">
          <label for="phone">Phone *</label>
          <input type="tel" id="phone" name="phone" required>
          <div class="error" id="error-phone"></div>
        </div>
        <div class="form-group">
          <label for="email">Email *</label>
          <input type="email" id="email" name="email" required>
          <div class="error" id="error-email"></div>
        </div>
        <div class="form-group">
          <label for="address1">Street Address *</label>
          <input type="text" id="address1" name="address1" required>
          <div class="error" id="error-address1"></div>
        </div>
        <div class="form-group">
          <label for="address2">Address Line 2</label>
          <input type="text" id="address2" name="address2">
          <div class="error" id="error-address2"></div>
        </div>
        <div class="form-group">
          <label for="city">City *</label>
          <input type="text" id="city" name="city" required>
          <div class="error" id="error-city"></div>
        </div>
        <div class="form-group">
          <label for="state">State / Region / Province *</label>
          <input type="text" id="state" name="state" required>
          <div class="error" id="error-state"></div>
        </div>
        <div class="form-group">
          <label for="postal">Postal / Zip Code </label>
          <input type="text" id="postal" name="postal" required>
          <div class="error" id="error-postal"></div>
        </div>
        <div class="form-group">
          <label for="country">Country </label>
          <select id="country" name="country" required>
            <option value="">Select Country</option>
            <option value="India">India</option>
            <option value="USA">USA</option>
            <option value="UK">UK</option>
            <option value="Canada">Canada</option>
            <!-- add more countries as needed -->
          </select>
          <div class="error" id="error-country"></div>
        </div>
      </div>

      <!-- Step 2: Emergency Contact Details -->
      <div class="form-step" data-step="2">
        <div class="form-group">
          <label for="emergencyName">Emergency Contact Name </label>
          <input type="text" id="emergencyName" name="emergencyName" required>
          <div class="error" id="error-emergencyName"></div>
        </div>
        <div class="form-group">
          <label for="emergencyPhone">Emergency Contact Phone </label>
          <input type="tel" id="emergencyPhone" name="emergencyPhone" required>
          <div class="error" id="error-emergencyPhone"></div>
        </div>
        <div class="form-group">
          <label for="relationship">Relationship *</label>
          <input type="text" id="relationship" name="relationship" required>
          <div class="error" id="error-relationship"></div>
        </div>
      </div>

      <!-- Step 3: Services & Checkout -->
      <div class="form-step" data-step="3">
        <div class="form-group">
          <label for="service">Choose Service *</label>
          <select id="service" name="service" required>
            <option value="">Select a service</option>
            <option value="massage">Massage</option>
            <option value="facial">Facial</option>
            <option value="manicure">Manicure</option>
            <option value="pedicure">Pedicure</option>
          </select>
          <div class="error" id="error-service"></div>
        </div>
        <div class="form-group">
          <label for="date">Preferred Date *</label>
          <input type="date" id="date" name="date" required>
          <div class="error" id="error-date"></div>
        </div>
        <div class="form-group">
          <label for="time">Preferred Time *</label>
          <input type="time" id="time" name="time" required>
          <div class="error" id="error-time"></div>
        </div>
        <div class="form-group">
          <label for="notes">Additional Notes</label>
          <textarea id="notes" name="notes" rows="3"></textarea>
          <div class="error" id="error-notes"></div>
        </div>
      </div>

      <div class="button-group">
        <button type="button" id="prevBtn" disabled>Back</button>
        <button type="button" id="nextBtn">Next</button>
        <button type="submit" id="submitBtn" style="display:none;">Submit</button>
      </div>
    </form>
  </div>

  <script>
    (function(){
      const form = document.getElementById("spaForm");
      const formSteps = document.querySelectorAll(".form-step");
      const stepIndicator = document.querySelectorAll(".step");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");
      const submitBtn = document.getElementById("submitBtn");

      let currentStep = 0;

      function showStep(step) {
        formSteps.forEach((fs, idx) => {
          fs.classList.toggle("active", idx === step);
        });
        stepIndicator.forEach((st, idx) => {
          st.classList.toggle("active", idx === step);
          st.classList.toggle("completed", idx < step);
        });
        prevBtn.disabled = (step === 0);
        nextBtn.style.display = step === formSteps.length - 1 ? "none" : "inline-block";
        submitBtn.style.display = step === formSteps.length - 1 ? "inline-block" : "none";
      }

      function validateStep(step) {
        let valid = true;
        const inputs = formSteps[step].querySelectorAll("[required]");
        inputs.forEach(input => {
          const errElem = document.getElementById("error-" + input.id);
          if (!input.value.trim()) {
            errElem.textContent = "This field is required";
            valid = false;
          } else {
            // additional validations
            if (input.type === "email") {
              const pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              if (!pattern.test(input.value.trim())) {
                errElem.textContent = "Please enter a valid email";
                valid = false;
              } else {
                errElem.textContent = "";
              }
            } else if (input.type === "tel") {
              const phonePattern = /^\+?[\d\s\-]{7,15}$/;
              if (!phonePattern.test(input.value.trim())) {
                errElem.textContent = "Please enter a valid phone number";
                valid = false;
              } else {
                errElem.textContent = "";
              }
            } else {
              errElem.textContent = "";
            }
          }
        });
        return valid;
      }

      nextBtn.addEventListener("click", () => {
        if (validateStep(currentStep)) {
          currentStep++;
          showStep(currentStep);
        }
      });

      prevBtn.addEventListener("click", () => {
        currentStep--;
        showStep(currentStep);
      });

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (validateStep(currentStep)) {
          // optionally validate earlier steps too before submission
          // collect data and submit
          alert("Form submitted successfully!");
          // form.reset();
        }
      });

      // initialize
      showStep(currentStep);
    })();
  </script>
</body>
</html>